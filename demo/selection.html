<html>

<head>
    <meta charset="UTF-8">
    <title>Azar</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.materialdesignicons.com/3.6.95/css/materialdesignicons.min.css" rel="stylesheet">
    <script src="../dist/absol.js?"></script>
    <link rel="stylesheet" href="https://absol.cf.cf/hightlight/styles/default.css">
    <script src="https://absol.cf.cf/hightlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <h1>ContentEditable</h1>
    <script class="viewable">
        var editor = absol._({
            child: absol.text.textToNodes('This is first line\nThis is second line\n\nThis is 4th line\n\n\n')
        }).attr('contenteditable', 'true').addStyle({
            height: '200px',
            width: '50%',
            border: 'solid 1px gray'
        }).addTo(document.body);

        absol._('<button>Start</button>').on('click', function () {
            editor.focus();
            absol.text.setSelectionRange(editor, 0, 0);
        }).addTo(document.body);
        absol._('<button>End</button>').on('click', function () {
            editor.focus();
            absol.text.setSelectionRange(editor, Infinity);
        }).addTo(document.body);
        absol._('<button>First line</button>').on('click', function () {
            editor.focus();
            absol.text.setSelectionRange(editor, 0, 18);
        }).addTo(document.body);
        absol._('<button>Second line</button>').on('click', function () {
            editor.focus();
            absol.text.setSelectionRange(editor, 19, 38);
        }).addTo(document.body);

    </script>

    <script>
        var viewableScript = document.querySelectorAll('script.viewable');
        viewableScript.forEach(function (elt) {
            absol.$(elt).selfReplace(absol._({
                tag: 'pre',
                child: {
                    tag: 'code',
                    class: 'js',
                    child: { text: elt.innerHTML }
                }
            }));
        });
        setTimeout(function () {
            var href = location.href;
            var mathedscroll = href.match(/\#([a-z0-9\_A-Z\-]+)/);
            if (mathedscroll) {
                var e = absol.$(mathedscroll[0]);
                if (e) e.scrollIntoView();
            }
        }, 1000)
    </script>
</body>

</html>